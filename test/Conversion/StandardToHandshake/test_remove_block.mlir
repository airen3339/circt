// NOTE: Assertions have been autogenerated by utils/update_mlir_test_checks.py
// RUN: circt-opt -create-dataflow -remove-block-structure %s | FileCheck %s

// CHECK: module {
// CHECK-LABEL: handshake.func @dfs_block_order(
// CHECK-SAME:  %[[VAL_0:.*]]: none, ...) -> (i32, none) {
func @dfs_block_order() -> (i32) {

  // CHECK: handshake.constant
  %0 = constant 42 : i32
  // CHECK-NOT: "handshake.terminator"()[^bb2] : () -> ()
  br ^bb2

// CHECK-NOT: ^bb1:
^bb1:
  // CHECK: addi
  %2 = addi %0, %1 : i32
  // CHECK-NOT: handshake.return
  return %2 : i32

// CHECK-NOT: ^bb2:
^bb2:
  // CHECK: handshake.constant
  %1 = constant 55 : i32
  // CHECK-NOT: "handshake.terminator"()[^bb1] : () -> ()
  br ^bb1
  // CHECK: handshake.return

// CHECK:   }
// CHECK: }
}